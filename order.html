<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Order - Efoyta Tech</title>
  <link rel="icon" type="image/png" href="img/favi.png">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet"/>

  <style>
    :root {
      --primary: #2d5bff;
      --primary-hover: #1f46d4;
      --dark: #0f172a;
      --slate: #64748b;
      --bg: #f8fafc;
      --white: #ffffff;
      --nav-glass: rgba(15, 23, 42, 0.98);
    }

    * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif; }
    body { background: var(--bg); color: var(--dark); line-height: 1.6; }

    /* ================= NAVBAR ================= */
    .navbar {
      position: fixed; top: 0; left: 0; width: 100%;
      display: flex; align-items: center; justify-content: space-between;
      padding: 15px 10%; background: var(--nav-glass);
      backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      z-index: 2000;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }
    .logo { font-size: 1.6rem; font-weight: 800; color: #fff; letter-spacing: -0.5px; text-decoration: none; }
    .logo span { color: var(--primary); }
    
    .nav_items { display: flex; list-style: none; gap: 30px; align-items: center; }
    .nav_items li a { text-decoration: none; color: rgba(255, 255, 255, 0.85); font-weight: 500; font-size: 0.95rem; transition: 0.3s ease; }
    .nav_items li a:hover, .nav_items li a.active { color: var(--primary); }
    
    .menu-toggle { display: none; font-size: 1.8rem; cursor: pointer; color: white; }

    @media (max-width: 768px) {
      .menu-toggle { display: block; }
      .nav_items {
        position: fixed; top: 0; padding-top: 100px; left: -100%; 
        flex-direction: column; background: var(--dark);
        width: 100%; height: 100vh; transition: 0.4s ease-in-out; z-index: 1500;
      }
      .nav_items.active { left: 0; }
      .nav_items li { margin: 15px 0; }
    }

    /* ================= FORM STYLING ================= */
    .sec { padding: 120px 5% 50px; max-width: 900px; margin: auto; }
    .head_1 { text-align: center; margin-bottom: 2.5rem; }
    .sub_heading { color: var(--primary); font-size: 1.2rem; font-weight: 600; text-transform: uppercase; }
    .heading { font-size: 2.2rem; font-weight: 700; color: var(--dark); }

    .order_container {
      background: #fff; padding: 2.5rem; border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.05);
    }

    .order_form { display: flex; flex-direction: column; gap: 1.2rem; }
    .order_form label { font-weight: 600; color: var(--dark); font-size: 0.9rem; }

    .order_form input, .order_form select, .order_form textarea {
      padding: 0.8rem 1rem; border-radius: 10px;
      border: 1px solid #e2e8f0; font-size: 0.95rem; background: #fdfdfd;
    }
    .order_form input:focus, .order_form select:focus, .order_form textarea:focus {
      border-color: var(--primary); outline: none; box-shadow: 0 0 0 3px rgba(45, 91, 255, 0.1);
    }

    .btn {
      padding: 0.8rem 1.5rem; border: none; border-radius: 10px;
      background: var(--primary); color: #fff; font-weight: 600; cursor: pointer;
      transition: 0.3s;
    }
    .btn:hover { background: var(--primary-hover); transform: translateY(-2px); }

    .products_box {
      background: #f1f5f9; padding: 1rem; border-radius: 12px;
      max-height: 200px; overflow-y: auto; border: 1px dashed #cbd5e1;
    }
    .product_row {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 8px; padding: 10px; border-radius: 8px; background: #fff;
      font-size: 0.9rem; border: 1px solid #e2e8f0;
    }
    .remove {
      background: #ff4d4d; color: #fff; border: none;
      border-radius: 6px; padding: 2px 8px; cursor: pointer;
    }

    .order_summary {
      background: var(--dark); color: white; padding: 1.2rem; border-radius: 12px;
      margin-top: 10px; text-align: center;
    }
    .order_summary h4 { font-weight: 400; }
    .order_summary span { font-weight: 700; color: var(--primary); font-size: 1.4rem; }

    /* ================= FIXED FOOTER UI ================= */
    footer { 
      background: var(--dark); 
      color: #94a3b8; 
      padding: 4rem 10% 2rem; 
      margin-top: 4rem; 
    }
    .footer_content { 
      max-width: 1200px; 
      margin: auto; 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
      gap: 3rem; 
      border-bottom: 1px solid #1e293b; 
      padding-bottom: 3rem; 
    }
    .footer_col h4 { color: white; margin-bottom: 1.5rem; font-size: 1.1rem; }
    .footer_col p, .footer_col li { font-size: 0.9rem; margin-bottom: 10px; }
    .footer_col ul { list-style: none; padding: 0; }
    .footer_col a { color: inherit; text-decoration: none; transition: 0.3s ease; }
    .footer_col a:hover { color: var(--primary); }
    
    .footer_socials { display: flex; gap: 12px; margin-top: 1.2rem; }
    .footer_socials a { 
      font-size: 1.2rem; 
      color: white; 
      background: #1e293b; 
      width: 40px; 
      height: 40px; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      border-radius: 50%; 
      transition: 0.3s ease; 
    }
    .footer_socials a:hover { background: var(--primary); transform: translateY(-3px); }
  </style>
</head>

<body>

<header>
  <nav class="navbar">
    <a href="index.html" class="logo">Efoyta <span>Tech</span></a>
    <div class="menu-toggle" id="mobile-menu">
      <i class="ri-menu-line"></i>
    </div>
    <ul class="nav_items" id="nav-list">
      <li><a href="profile.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="order.html" class="active">Order</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
  </nav>
</header>

<section class="sec">
  <div class="head_1">
    <h3 class="sub_heading">Place Your Order</h3>
    <h1 class="heading">Customize Your Printed Products</h1>
    <p class="para">Select multiple products, upload design & receipt, and submit your order.</p>
  </div>

  <div class="order_container">
    <form class="order_form" id="orderForm">
      <label>Select Product</label>
      <select id="material">
        <option value="">Choose Product</option>
        <optgroup label="Paper Bags – Duplex (With Logo)">
          <option data-price="35">Small – 35 ETB</option>
          <option data-price="45">Medium (1) – 45 ETB</option>
          <option data-price="50">Medium (2) – 50 ETB</option>
          <option data-price="60">Large – 60 ETB</option>
        </optgroup>
        <optgroup label="Paper Bags – Duplex (Without Logo)">
          <option data-price="30">Small – 30 ETB</option>
          <option data-price="42">Medium (1) – 42 ETB</option>
          <option data-price="45">Medium (2) – 45 ETB</option>
          <option data-price="55">Large – 55 ETB</option>
        </optgroup>
        <optgroup label="Paper Bags – Kaki Imported (With Logo)">
          <option data-price="30">Small – 30 ETB</option>
          <option data-price="35">Medium (1) – 35 ETB</option>
          <option data-price="40">Medium (2) – 40 ETB</option>
          <option data-price="53">Large – 53 ETB</option>
        </optgroup>
        <optgroup label="Paper Bags – Kaki Imported (Without Logo)">
          <option data-price="23">Small (24×19 cm) – 23 ETB</option>
          <option data-price="30">Medium (24×35 cm) – 30 ETB</option>
          <option data-price="35">Medium (34×35 cm) – 35 ETB</option>
          <option data-price="40">Large (40×35 cm) – 40 ETB</option>
        </optgroup>
        <optgroup label="Other Products">
          <option data-price="40">Cap-40 ETB</option>
          <option data-price="80">T-Shirt-80 ETB</option>
          <option data-price="70">Hoodie-70 ETB</option>
          <option data-price="90">Jacket-90 ETB</option>
          <option data-price="80">Mugs & Cups-80 ETB</option>
          <option data-price="90">Glass Bottles-90 ETB</option>
          <option data-price="80">Tote / Fabric Bag-80 ETB</option>
          <option data-price="80">Scarf-80 ETB</option>
          <option data-price="70">Apron-70 ETB</option>
          <option data-price="60">Poster-60 ETB</option>
          <option data-price="90">Flyer-90 ETB</option>
        </optgroup>
      </select>

      <label>Quantity</label>
      <input type="number" id="quantity" min="1" value="1">

      <button type="button" class="btn" onclick="addProduct()">Add Product to List</button>

      <div class="products_box" id="productsBox"></div>

      <label>Upload Logo / Design</label>
      <input type="file" id="logo" required>

      <label>Payment Information</label>
      <div style="background:#f0f8ff;padding:1rem;border-radius:10px;font-size:0.9rem;color:var(--dark); border-left: 4px solid var(--primary);">
        <p><strong>Telebirr:</strong> +251 90 799 2963</p>
        <p><strong>CBE:</strong> Account No. 10000...</p>
        <p><strong>Abyssinia:</strong> Account No. 56...</p>
      </div>

      <label>Upload Payment Receipt</label>
      <input type="file" id="receipt" required>

      <label>Delivery Option</label> 
      <select id="delivery" required> 
        <option value="">Choose</option> 
        <option>Pickup</option> 
        <option>Delivery</option> 
      </select> 

      <label>Delivery Address (if delivery)</label> 
      <textarea id="address"></textarea>

      <label>Full Name</label>
      <input type="text" id="name" required>

      <label>Email</label>
      <input type="email" id="email" required>

      <label>Phone Number</label>
      <input type="text" id="phone" required>

      <div class="order_summary">
        <h4>Total Payable: <span id="totalPrice">0</span> ETB</h4>
      </div>

      <button class="btn" type="submit" style="font-size: 1.1rem; margin-top: 10px;">Place Order Now</button>
    </form>
  </div>
</section>

<footer>
  <div class="footer_content">
    <div class="footer_col">
      <h4>Efoyta Tech</h4>
      <p>The standard for digital printing in Ethiopia. High quality, zero hassle.</p>
      <div class="footer_socials">
        <a href="https://t.me/Lilyteoes" target="_blank"><i class="ri-telegram-line"></i></a>
        <a href="#"><i class="ri-tiktok-line"></i></a>
        <a href="mailto:eliyasminase123@gmail.com"><i class="ri-mail-line"></i></a>
      </div>
    </div>
    <div class="footer_col">
      <h4>Navigation</h4>
      <ul>
        <li><a href="profile.html">Home</a></li>
        <li><a href="about.html">About Us</a></li>
        <li><a href="contact.html">Contact Us</a></li>
        <li><a href="privacy.html">Privacy Policy</a></li>
      </ul>
    </div>
    <div class="footer_col">
      <h4>Reach Us</h4>
      <p><i class="ri-phone-fill"></i> +251 90 799 2963</p>
      <p><i class="ri-map-pin-2-fill"></i> Addis Ababa, Ethiopia</p>
    </div>
  </div>
  <p style="text-align: center; margin-top: 3rem; font-size: 0.8rem;">© 2025 Efoyta Technology Solutions. All Rights Reserved.</p>
</footer>

<script type="module">
  // --- MOBILE MENU LOGIC ---
  const menuBtn = document.getElementById('mobile-menu');
  const navList = document.getElementById('nav-list');
  const menuIcon = document.querySelector('#mobile-menu i');

  menuBtn.addEventListener('click', () => {
    navList.classList.toggle('active');
    const isOpen = navList.classList.contains('active');
    menuIcon.className = isOpen ? 'ri-close-line' : 'ri-menu-line';
  });

  // --- FIREBASE & ORDER LOGIC (UNCHANGED) ---
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js";

  const app = initializeApp({
    apiKey: "AIzaSyBHcGnd6tDNg5Wruabo8sWXO_Xz-SOrPBI",
    authDomain: "ordering-fd42a.firebaseapp.com",
    databaseURL: "https://ordering-fd42a-default-rtdb.firebaseio.com/",
    projectId: "ordering-fd42a",
    messagingSenderId: "379564875478",
    appId: "1:379564875478:web:42bc00e70a594bc24ef377"
  });

  const db = getDatabase(app);

  const material = document.getElementById("material");
  const quantity = document.getElementById("quantity");
  const logo = document.getElementById("logo");
  const receipt = document.getElementById("receipt");
  const delivery = document.getElementById("delivery");
  const address = document.getElementById("address");
  const name = document.getElementById("name");
  const email = document.getElementById("email");
  const phone = document.getElementById("phone");

  const products = [];
  const box = document.getElementById("productsBox");
  const totalEl = document.getElementById("totalPrice");

  window.addProduct = () => {
    const sel = material.options[material.selectedIndex];
    const qty = parseInt(quantity.value);
    if (!sel.dataset.price || qty < 1) {
      alert("Select a product and quantity.");
      return;
    }
    products.push({ name: sel.textContent, price: Number(sel.dataset.price), qty });
    renderProducts();
  };

  function renderProducts() {
    box.innerHTML = "";
    let total = 0;
    products.forEach((p, i) => {
      total += p.price * p.qty;
      const div = document.createElement("div");
      div.className = "product_row";
      div.innerHTML = `<span>${p.qty} × ${p.name}</span><span>${p.price * p.qty} ETB</span>`;
      const btn = document.createElement("button");
      btn.className = "remove";
      btn.textContent = "X";
      btn.onclick = () => { products.splice(i, 1); renderProducts(); };
      div.appendChild(btn);
      box.appendChild(div);
    });
    totalEl.textContent = total;
  }

  async function uploadToCloudinary(file) {
    const CLOUD_NAME = "ddbn2w991";
    const UPLOAD_PRESET = "efoyta_upload";
    const url = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`;
    const formData = new FormData();
    formData.append("file", file);
    formData.append("upload_preset", UPLOAD_PRESET);
    const res = await fetch(url, { method: "POST", body: formData });
    const data = await res.json();
    if (!data.secure_url) throw new Error("Upload failed");
    return data.secure_url;
  }

  document.getElementById("orderForm").addEventListener("submit", async e => {
    e.preventDefault();
    if (products.length === 0) { alert("Please add at least one product."); return; }
    try {
      const logoFile = logo.files[0];
      const receiptFile = receipt.files[0];
      if (!logoFile || !receiptFile) { alert("Please upload both logo and receipt."); return; }

      const logoURL = await uploadToCloudinary(logoFile);
      const receiptURL = await uploadToCloudinary(receiptFile);

      await push(ref(db, "orders"), {
        products, totalETB: totalEl.textContent,
        delivery: delivery.value, address: address.value,
        name: name.value, email: email.value, phone: phone.value,
        logoURL, receiptURL, time: new Date().toISOString()
      });

      alert("✅ Order submitted successfully!");
      document.getElementById("orderForm").reset();
      products.length = 0;
      renderProducts();
    } catch (error) {
      console.error(error);
      alert("❌ Failed to submit order.");
    }
  });
</script>

</body>
</html>